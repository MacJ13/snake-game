(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const g of s)if(g.type==="childList")for(const p of g.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function n(s){const g={};return s.integrity&&(g.integrity=s.integrity),s.referrerPolicy&&(g.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?g.credentials="include":s.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function l(s){if(s.ep)return;s.ep=!0;const g=n(s);fetch(s.href,g)}})();const S="/snake-game/images/snake/apple.png",x="/snake-game/images/snake/head_up.png",I="/snake-game/images/snake/head_down.png",L="/snake-game/images/snake/head_left.png",z="/snake-game/images/snake/head_right.png",R="/snake-game/images/snake/tail_up.png",_="/snake-game/images/snake/tail_down.png",P="/snake-game/images/snake/tail_left.png",v="/snake-game/images/snake/tail_right.png",B="/snake-game/images/snake/body_vertical.png",A="/snake-game/images/snake/body_horizontal.png",T="/snake-game/images/snake/body_bottomleft.png",U="/snake-game/images/snake/body_bottomright.png",O="/snake-game/images/snake/body_topleft.png",F="/snake-game/images/snake/body_topright.png",c=e=>{const t=new Image;return t.src=e,t},H=c(S),M=c(x),C=c(I),E=c(z),q=c(L),N=c(R),V=c(_),X=c(v),Y=c(P),K=c(B),W=c(A),$=c(T),j=c(U),G=c(O),J=c(F),i={food:H,headUp:M,headDown:C,headRight:E,headLeft:q,tailUp:N,tailDown:V,tailRight:X,tailLeft:Y,bodyVertical:K,bodyHorizontal:W,bodyBottomLeft:$,bodyBottomRight:j,bodyTopLeft:G,bodyTopRight:J};document.querySelector("#app").innerHTML=`
  <div class="container">
    <div class="header">
      <h1 class="title">Snake game</h1>
    </div>
    <canvas id="canvas"></canvas>
  </div>
`;const f=document.querySelector("#canvas"),m=f.getContext("2d");let r;const o={startX:200,startY:200,dx:1,dy:0,changeDirection:!1,direction:"right",playing:!0,score:0,snakeParts:3},a={width:400,height:400,cellSize:20},d=[],h=[];let w=Date.now(),u;const Q=()=>{f.width=a.width,f.height=a.height,o.dx*=a.cellSize},Z=()=>{for(let e=0;e<=o.snakeParts;e++){const t=o.startX-e*a.cellSize,n=o.startY;d[e]={x:t,y:n,direction:"right"}}},k=()=>{let e=Math.floor(Math.random()*f.width/a.cellSize)*a.cellSize,t=Math.floor(Math.random()*f.height/a.cellSize)*a.cellSize;d.find(l=>l.x===e&&l.y===t)?k():(h[0]=e,h[1]=t)},y=(e,t,n)=>{m.drawImage(e,t,n,a.cellSize,a.cellSize)},D=e=>{let t=i.headUp;e.direction==="up"?t=i.headUp:e.direction==="right"?t=i.headRight:e.direction==="down"?t=i.headDown:e.direction==="left"&&(t=i.headLeft),y(t,e.x,e.y)},ee=e=>{e==="up"?r=i.tailDown:e==="right"?r=i.tailLeft:e==="down"?r=i.tailUp:e==="left"&&(r=i.tailRight)},te=e=>{switch(e){case"right":case"left":r=i.bodyHorizontal;break;case"up":case"down":r=i.bodyVertical;break;default:throw new Error("no direction")}},oe=(e,t)=>{switch(!0){case(t==="up"&&e==="right"):case(t==="left"&&e==="down"):r=i.bodyTopLeft;break;case(t==="down"&&e==="right"):case(t==="left"&&e==="up"):r=i.bodyBottomLeft;break;case(t==="right"&&e==="down"):case(t==="up"&&e==="left"):r=i.bodyTopRight;break;case(t==="right"&&e==="up"):case(t==="down"&&e==="left"):r=i.bodyBottomRight;break;default:throw new Error("no direction")}},ne=()=>{m.fillStyle="orangered",m.strokeStyle="#ecfeff";const[e]=d;for(let t=1;t<d.length;t++){const n=d[t],l=d[t-1];t===d.length-1?(ee(l.direction),y(r,n.x,n.y)):n.direction===l.direction?te(n.direction):oe(n.direction,l.direction),y(r,n.x,n.y)}D(e)},ae=()=>{y(i.food,h[0],h[1])},se=(e,t)=>e<0||e>=a.width||t<0||t>=a.height,ie=(e,t)=>h[0]===e&&h[1]===t,ce=()=>{const[e,...t]=d;return t.every(n=>e.x!==n.x||e.y!==n.y)},de=()=>{const e=d[0],t=ie(e.x,e.y),n=e.x+o.dx,l=e.y+o.dy;let s=d.pop();d.unshift({x:n,y:l,direction:o.direction}),t&&(d.push(s),k())},re=()=>{const e=d[0],t=se(e.x,e.y);!ce()||t||(le(),ae(),ne(),de())},le=()=>{m.clearRect(0,0,a.width,a.height)},b=()=>{u=Date.now(),u-w>125&&(o.changeDirection=!1,w=u,re()),window.requestAnimationFrame(b)},ge=()=>{f.getContext!==void 0&&(Q(),Z(),k(),b())};ge();document.addEventListener("keydown",e=>{o.changeDirection||(o.changeDirection=!0,e.key==="ArrowUp"&&o.dy===0?(o.dy=-1*a.cellSize,o.dx=0,o.direction="up"):e.key==="ArrowRight"&&o.dx===0?(o.dy=0,o.dx=1*a.cellSize,o.direction="right"):e.key==="ArrowDown"&&o.dy===0?(o.dy=1*a.cellSize,o.dx=0,o.direction="down"):e.key==="ArrowLeft"&&o.dx===0&&(o.dy=0,o.dx=-1*a.cellSize,o.direction="left"))});
